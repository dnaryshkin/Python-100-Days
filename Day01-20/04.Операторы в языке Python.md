## Операторы в языке Python

Python поддерживает множество операторов. В таблице ниже операторы перечислены в порядке убывания приоритета. С помощью переменных и операторов мы можем создавать разнообразные выражения для решения практических задач. В компьютерных науках **выражение — это синтаксическая сущность программы, состоящая из одной или нескольких констант, переменных, функций и операторов, которую язык программирования может интерпретировать и вычислить для получения другого значения**. Если это определение непонятно, ничего страшного, но важно знать: создание выражений крайне важно в любом языке программирования.

| Оператор                                                     | Описание                       |
|-------------------------------------------------------------|-------------------------------|
| `[]`, `[:]`                                                 | Индексация, срезы             |
| `**`                                                        | Возведение в степень          |
| `~`, `+`, `-`                                               | Побитовая инверсия, унарный плюс, унарный минус |
| `*`, `/`, `%`, `//`                                         | Умножение, деление, остаток, целочисленное деление |
| `+`, `-`                                                    | Сложение, вычитание           |
| `>>`, `<<`                                                  | Побитовый сдвиг вправо, влево |
| `&`                                                         | Побитовое И                   |
| `^`, `|`                                                    | Побитовое ИЛИ, побитовое исключающее ИЛИ |
| `<=`, `<`, `>`, `>=`                                        | Меньше или равно, меньше, больше, больше или равно |
| `==`, `!=`                                                  | Равно, не равно               |
| `is`, `is not`                                              | Операторы идентичности        |
| `in`, `not in`                                              | Операторы принадлежности      |
| `not`, `or`, `and`                                          | Логические операторы          |
| `=`, `+=`, `-=`, `*=`, `/=`, `%=`, `//=`, `**=`, `&=`, `|=`, `^=`, `>>=`, `<<=` | Операторы присваивания |

>**Примечание**: Приоритет определяет порядок выполнения операторов в выражении с несколькими операторами. Если приоритет операторов в выражении непонятен, используйте круглые скобки, чтобы явно задать порядок вычислений.

### Арифметические операторы

В Python доступно множество арифметических операторов: помимо привычных сложения, вычитания, умножения и деления, есть операторы целочисленного деления, получения остатка и возведения в степень. Пример ниже демонстрирует их использование.

```python
"""
Арифметические операторы

Version: 1.0
Author: 骆昊
"""
print(321 + 12)     # Сложение, вывод: 333
print(321 - 12)     # Вычитание, вывод: 309
print(321 * 12)     # Умножение, вывод: 3852
print(321 / 12)     # Деление, вывод: 26.75
print(321 // 12)    # Целочисленное деление, вывод: 26
print(321 % 12)     # Остаток, вывод: 9
print(321 ** 12)    # Возведение в степень, вывод: 1196906950228928915420617322241
```

Арифметические операции выполняются по правилу: сначала умножение и деление, затем сложение и вычитание, как в математике. Приоритет умножения и деления выше, чем у сложения и вычитания. Возведение в степень имеет ещё более высокий приоритет. Чтобы изменить порядок вычислений, используйте круглые скобки, как показано в примере ниже.

```python
"""
Приоритет арифметических операций

Version: 1.0
Author: 骆昊
"""
print(2 + 3 * 5)           # 17
print((2 + 3) * 5)         # 25
print((2 + 3) * 5 ** 2)    # 125
print(((2 + 3) * 5) ** 2)  # 625
```

### Операторы присваивания

Оператор присваивания — один из самых распространённых. Он присваивает значение справа переменной слева. Операторы присваивания могут комбинироваться с арифметическими операторами, образуя составные операторы присваивания, например: `a += b` эквивалентно `a = a + b`, а `a *= a + 2` эквивалентно `a = a * (a + 2)`. Пример ниже демонстрирует их использование.

```python
"""
Операторы присваивания и составные операторы присваивания

Version: 1.0
Author: 骆昊
"""
a = 10
b = 3
a += b        # Эквивалентно: a = a + b
a *= a + 2    # Эквивалентно: a = a * (a + 2)
print(a)      # Рассчитайте, что будет выведено
```

Выражение с присваиванием само по себе не возвращает значения. Попытка вывести значение присваивания в `print`, например `print(a = 10)`, вызовет синтаксическую ошибку. Для решения этой проблемы в Python 3.8 введён оператор `:=`, называемый «моржовым» оператором. Он присваивает значение справа переменной слева, а само значение становится результатом выражения. Пример ниже поясняет его работу.

```python
"""
Моржовый оператор

Version: 1.0
Author: 骆昊
"""
# SyntaxError: invalid syntax
# print((a = 10))
# Моржовый оператор
print((a := 10))  # 10
print(a)          # 10
```

> **Подсказка**: Если раскомментировать строку 8, код выдаст ошибку `SyntaxError: invalid syntax`. Обратите внимание, что в этой строке `a = 10` заключено в скобки. Если случайно написать `print(a = 10)`, возникнет ошибка `TypeError: 'a' is an invalid keyword argument for print()`. Значение этой ошибки станет понятно при изучении функций.

### Операторы сравнения и логические операторы

Операторы сравнения (или операторы отношения) включают `==`, `!=`, `<`, `>`, `<=`, `>=`. Они интуитивно понятны. Важно помнить, что для сравнения на равенство используется `==` (два знака равенства), так как `=` — это оператор присваивания. Для сравнения на неравенство используется `!=`, который отличается от математического символа $\small{\neq}$. В Python 2 для неравенства использовался оператор `<>`, но в Python 3 его использование вызывает `SyntaxError` (синтаксическая ошибка). Операторы сравнения возвращают булевы значения: `True` или `False`.

Логические операторы включают `and`, `or` и `not`. Оператор `and` (означает «и») соединяет два булевых значения или выражения, возвращающих булевы значения. Если оба значения `True`, результат будет `True`; если хотя бы одно значение `False`, результат будет `False`. Если левое значение `and` равно `False`, правое значение не вычисляется (это называется коротким замыканием; выражение справа не выполняется). Оператор `or` (означает «или») также соединяет два булевых значения или выражения. Если хотя бы одно значение `True`, результат будет `True`. При коротком замыкании, если левое значение `True`, правое не вычисляется. Оператор `not` применяется к одному булевому значению или выражению: если значение `True`, результат “‘“`False`, и наоборот.

```python
"""
Операторы сравнения и логические операторы

Version: 1.0
Author: 骆昊
"""
flag0 = 1 == 1
flag1 = 3 > 2
flag2 = 2 < 1
flag3 = flag1 and flag2
flag4 = flag1 or flag2
flag5 = not flag0
print('flag0 =', flag0)     # flag0 = True
print('flag1 =', flag1)     # flag1 = True
print('flag2 =', flag2)     # flag2 = False
print('flag3 =', flag3)     # flag3 = False
print('flag4 =', flag4)     # flag4 = True
print('flag5 =', flag5)     # flag5 = False
print(flag1 and not flag2)  # True
print(1 > 2 or 2 == 3)      # False
```

> **Примечание**: Приоритет операторов сравнения выше, чем у операторов присваивания, поэтому в выражении `flag0 = 1 == 1` сначала выполняется `1 == 1`, возвращающее `True`, а затем это значение присваивается переменной `flag0`. Функция `print` может выводить несколько значений, разделённых запятыми, с пробелом между ними по умолчанию.

### Применение операторов и выражений

#### Пример 1: Перевод температуры из Фаренгейта в Цельсий

> **Требование**: Введите температуру в градусах Фаренгейта и преобразуйте её в градусы Цельсия по формуле: $\small{C = (F - 32) / 1.8}$.

```python
"""
Перевод температуры из Фаренгейта в Цельсий

Version: 1.0
Author: 骆昊
"""
f = float(input('Введите температуру в Фаренгейтах: '))
c = (f - 32) / 1.8
print('%.1f°F = %.1f°C' % (f, c))
```

> **Примечание**: Функция `input` принимает пользовательский ввод в виде строки. Для выполнения арифметических операций строку нужно преобразовать в число с помощью функции `float`, как описано в предыдущем уроке.

В коде выше используется форматированный вывод: строка в функции `print` содержит два заполнителя `%.1f`, которые заменяются значениями переменных `f` и `c` типа `float`, с одним знаком после запятой. Заполнитель `%d` используется для целых чисел, а `%s` — для строк.

Альтернативный способ форматирования вывода в Python использует f-строки. Символ `f` перед строкой указывает на необходимость форматирования. Заполнители `{f:.1f}` и `{c:.1f}` заменяются значениями переменных `f` и `c`, где `:.1f` означает, что это число с плавающей точкой с одним знаком после запятой.

```python
"""
Перевод температуры из Фаренгейта в Цельсий

Version: 1.1
Author: 骆昊
"""
f = float(input('Введите температуру в Фаренгейтах: '))
c = (f - 32) / 1.8
print(f'{f:.1f}°F = {c:.1f}°C')
```

#### Пример 2: Вычисление длины окружности и площади круга

> **Требование**: Введите радиус круга ($\small{r}$) и вычислите его длину окружности ($\small{2 \pi r}$) и площадь ($\small{\pi r^{2}}$).

```python
"""
Вычисление длины окружности и площади круга

Version: 1.0
Author: 骆昊
"""
radius = float(input('Введите радиус круга: '))
perimeter = 2 * 3.1416 * radius
area = 3.1416 * radius * radius
print('Длина окружности: %.2f' % perimeter)
print('Площадь: %.2f' % area)
```

В Python есть встроенный модуль `math`, содержащий переменную `pi` с значением числа π. Для использования этой переменной можно модифицировать код, как показано ниже.

```python
"""
Вычисление длины окружности и площади круга

Version: 1.1
Author: 骆昊
"""
import math

radius = float(input('Введите радиус круга: '))
perimeter = 2 * math.pi * radius
area = math.pi * radius ** 2
print(f'Длина окружности: {perimeter:.2f}')
print(f'Площадь: {area:.2f}')
```

> **Примечание**: Код `import math` импортирует модуль `math`, позволяя использовать `math.pi` для получения значения числа π.

Существует ещё один способ форматирования вывода, появившийся в Python 3.8. Пример ниже демонстрирует его использование.

```python
"""
Вычисление длины окружности и площади круга

Version: 1.2
Author: 骆昊
"""
import math

radius = float(input('Введите радиус круга: '))  # Ввод: 5.5
perimeter = 2 * math.pi * radius
area = math.pi * radius ** 2
print(f'{perimeter = :.2f}')  # Вывод: perimeter = 34.56
print(f'{area = :.2f}')       # Вывод: area = 95.03
```

> **Примечание**: Если переменная `a` равна `9.87`, строка `f'{a = }'` выведет `a = 9.87`, а строка `f'{a = :.1f}'` выведет `a = 9.9`. Этот способ форматирования позволяет одновременно выводить имя переменной и её значение.

#### Пример 3: Проверка високосного года

**Требование**: Введите год после 1582 и определите, является ли он високосным.

```python
"""
Ввод года, вывод True для високосного года, False для обычного

Version: 1.0
Author: 骆昊
"""
year = int(input('Введите год: '))
is_leap = year % 4 == 0 and year % 100 != 0 or year % 400 == 0
print(f'{is_leap = }')
```

> **Примечание**: Для григорианского календаря (современного), введённого папой Григорием XIII в октябре 1582 года, правила определения високосного года таковы: 1. Год, не кратный 4, — обычный. 2. Год, кратный 4, но не кратный 100, — високосный. 3. Год, кратный 400, — високосный. Код использует оператор `%` для проверки кратности года 4, 100 и 400, а операторы `and` и `or` объединяют условия: первые два условия должны выполняться одновременно, третье условие — одно из двух.

### Заключение

Операторы и выражения обладают огромной мощью, позволяя решать множество задач программирования. Переменные, операторы и выражения — основа любого языка программирования. Если что-то в этом уроке осталось непонятным, не торопитесь переходить к следующему, задайте вопросы в комментариях, и я оперативно помогу разобраться.